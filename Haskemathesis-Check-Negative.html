<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd"><html xmlns="http://www.w3.org/1999/xhtml"><head><meta http-equiv="Content-Type" content="text/html; charset=UTF-8" /><meta name="viewport" content="width=device-width, initial-scale=1" /><title>Haskemathesis.Check.Negative</title><link href="linuwial.css" rel="stylesheet" type="text/css" title="Linuwial" /><link rel="stylesheet" type="text/css" href="quick-jump.css" /><link rel="stylesheet" type="text/css" href="https://fonts.googleapis.com/css?family=PT+Sans:400,400i,700" /><script src="haddock-bundle.min.js" async="async" type="text/javascript"></script><script type="text/x-mathjax-config">MathJax.Hub.Config({ tex2jax: { processClass: "mathjax", ignoreClass: ".*" } });</script><script src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.5/MathJax.js?config=TeX-AMS-MML_HTMLorMML" type="text/javascript"></script></head><body><div id="package-header"><span class="caption">haskemathesis-0.1.0.0</span><ul class="links" id="page-menu"><li><a href="src/Haskemathesis.Check.Negative.html">Source</a></li><li><a href="index.html">Contents</a></li><li><a href="doc-index.html">Index</a></li></ul></div><div id="content"><div id="module-header"><table class="info"><tr><th>Safe Haskell</th><td>None</td></tr><tr><th>Language</th><td>Haskell2010</td></tr></table><p class="caption">Haskemathesis.Check.Negative</p></div><div id="description"><p class="caption">Description</p><div class="doc"><p>Checks that assert negative (invalid) requests are rejected.</p><p>This module provides checks for negative testing, which verifies that
the API properly rejects invalid requests. Negative tests generate
mutations that violate the OpenAPI schema (e.g., missing required fields,
wrong content types, invalid values) and verify the API returns a 4xx
status code.</p><h3>When to Use</h3><p>Use negative testing when you want to verify:</p><ul><li>Input validation is working correctly</li><li>Required fields are enforced</li><li>Content types are validated</li><li>Invalid values are rejected</li></ul><h3>Example</h3><pre>import Haskemathesis.Check.Negative (negativeTestRejection)
import Haskemathesis.Gen.Negative (renderNegativeMutation)

-- In a property test
result = negativeTestRejection mutationDescription request response operation
</pre></div></div><div id="synopsis"><details id="syn"><summary>Synopsis</summary><ul class="details-toggle" data-details-id="syn"><li class="src short"><a href="#v:negativeTestRejection">negativeTestRejection</a> :: <a href="${pkgroot}/../../../../i6dn6airzp2fb6gj0vqpriavxp098129-ghc-9.10.3-doc/share/doc/ghc/html/libraries/text-2.1.3-cd15/Data-Text.html#t:Text" title="Data.Text">Text</a> -&gt; <a href="Haskemathesis-Execute-Types.html#t:ApiRequest" title="Haskemathesis.Execute.Types">ApiRequest</a> -&gt; <a href="Haskemathesis-Execute-Types.html#t:ApiResponse" title="Haskemathesis.Execute.Types">ApiResponse</a> -&gt; <a href="Haskemathesis-OpenApi-Types.html#t:ResolvedOperation" title="Haskemathesis.OpenApi.Types">ResolvedOperation</a> -&gt; <a href="Haskemathesis-Check-Types.html#t:CheckResult" title="Haskemathesis.Check.Types">CheckResult</a></li></ul></details></div><div id="interface"><h1>Documentation</h1><div class="top"><p class="src"><a id="v:negativeTestRejection" class="def">negativeTestRejection</a> :: <a href="${pkgroot}/../../../../i6dn6airzp2fb6gj0vqpriavxp098129-ghc-9.10.3-doc/share/doc/ghc/html/libraries/text-2.1.3-cd15/Data-Text.html#t:Text" title="Data.Text">Text</a> -&gt; <a href="Haskemathesis-Execute-Types.html#t:ApiRequest" title="Haskemathesis.Execute.Types">ApiRequest</a> -&gt; <a href="Haskemathesis-Execute-Types.html#t:ApiResponse" title="Haskemathesis.Execute.Types">ApiResponse</a> -&gt; <a href="Haskemathesis-OpenApi-Types.html#t:ResolvedOperation" title="Haskemathesis.OpenApi.Types">ResolvedOperation</a> -&gt; <a href="Haskemathesis-Check-Types.html#t:CheckResult" title="Haskemathesis.Check.Types">CheckResult</a> <a href="src/Haskemathesis.Check.Negative.html#negativeTestRejection" class="link">Source</a> <a href="#v:negativeTestRejection" class="selflink">#</a></p><div class="doc"><p>Check that a negative test request was properly rejected.</p><p>This check verifies that the API returned a 4xx status code (client error)
for a request that was intentionally made invalid. If the API accepts
the invalid request (returns 2xx or 5xx), the check fails.</p><h3>Parameters</h3><ul><li><code>mutation</code> - Description of the mutation applied to make the request invalid</li><li><code>req</code> - The mutated <code><a href="Haskemathesis-Execute-Types.html#t:ApiRequest" title="Haskemathesis.Execute.Types">ApiRequest</a></code> that was sent</li><li><code>res</code> - The <code><a href="Haskemathesis-Execute-Types.html#t:ApiResponse" title="Haskemathesis.Execute.Types">ApiResponse</a></code> received from the API</li><li><code>op</code> - The <code><a href="Haskemathesis-OpenApi-Types.html#t:ResolvedOperation" title="Haskemathesis.OpenApi.Types">ResolvedOperation</a></code> being tested</li></ul><h3>Return Value</h3><p>Returns <code><a href="Haskemathesis-Check-Types.html#v:CheckPassed" title="Haskemathesis.Check.Types">CheckPassed</a></code> if the response status is 4xx, otherwise returns
<code><a href="Haskemathesis-Check-Types.html#v:CheckFailed" title="Haskemathesis.Check.Types">CheckFailed</a></code> with details about the failure.</p><h3>Example</h3><pre>import Haskemathesis.Gen.Negative (genNegativeRequest, renderNegativeMutation)

-- In a property test
mReq &lt;- forAll (genNegativeRequest operation)
case mReq of
    Nothing -&gt; success
    Just (req, mutation) -&gt; do
        res &lt;- evalIO (execute req)
        case negativeTestRejection (renderNegativeMutation mutation) req res operation of
            CheckPassed -&gt; success
            CheckFailed detail -&gt; ...
</pre></div></div></div></div><div id="footer"><p>Produced by <a href="http://www.haskell.org/haddock/">Haddock</a> version 2.31.1</p></div></body></html>