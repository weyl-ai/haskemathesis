<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd"><html xmlns="http://www.w3.org/1999/xhtml"><head><meta http-equiv="Content-Type" content="text/html; charset=UTF-8" /><meta name="viewport" content="width=device-width, initial-scale=1" /><title>Haskemathesis.Integration.Hspec</title><link href="linuwial.css" rel="stylesheet" type="text/css" title="Linuwial" /><link rel="stylesheet" type="text/css" href="quick-jump.css" /><link rel="stylesheet" type="text/css" href="https://fonts.googleapis.com/css?family=PT+Sans:400,400i,700" /><script src="haddock-bundle.min.js" async="async" type="text/javascript"></script><script type="text/x-mathjax-config">MathJax.Hub.Config({ tex2jax: { processClass: "mathjax", ignoreClass: ".*" } });</script><script src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.5/MathJax.js?config=TeX-AMS-MML_HTMLorMML" type="text/javascript"></script></head><body><div id="package-header"><span class="caption">haskemathesis-0.1.0.0</span><ul class="links" id="page-menu"><li><a href="src/Haskemathesis.Integration.Hspec.html">Source</a></li><li><a href="index.html">Contents</a></li><li><a href="doc-index.html">Index</a></li></ul></div><div id="content"><div id="module-header"><table class="info"><tr><th>Stability</th><td>experimental</td></tr><tr><th>Safe Haskell</th><td>None</td></tr><tr><th>Language</th><td>Haskell2010</td></tr></table><p class="caption">Haskemathesis.Integration.Hspec</p></div><div id="table-of-contents"><div id="contents-list"><p class="caption" onclick="window.scrollTo(0,0)">Contents</p><ul><li><a href="#g:1">Standard testing (WAI Application)</a></li><li><a href="#g:2">Standard testing (custom executor)</a></li><li><a href="#g:3">Standard testing (HTTP client)</a></li><li><a href="#g:4">WAI with Streaming Info</a></li><li><a href="#g:5">Negative testing</a></li></ul></div></div><div id="description"><p class="caption">Description</p><div class="doc"><p>This module provides integration with the Hspec testing framework,
allowing you to run OpenAPI conformance tests as part of your Hspec
test suite. It supports both standard conformance testing and negative
testing modes.</p><h4>Quick Start</h4><pre>import Test.Hspec
import Haskemathesis.Integration.Hspec
import Haskemathesis.Config

main :: IO ()
main = hspec $ specForAppWithConfig defaultConfig openApiSpec myApp
</pre><h4>Streaming Endpoint Handling</h4><p>WAI-based tests (in-memory, synchronous) cannot handle streaming endpoints
like Server-Sent Events (SSE) or NDJSON streams. These operations are
<strong>automatically skipped</strong> when using <code><a href="Haskemathesis-Integration-Hspec.html#v:specForApp" title="Haskemathesis.Integration.Hspec">specForApp</a></code> or <code><a href="Haskemathesis-Integration-Hspec.html#v:specForAppWithConfig" title="Haskemathesis.Integration.Hspec">specForAppWithConfig</a></code>.</p><p>To see which operations were skipped, use <code><a href="Haskemathesis-Integration-Hspec.html#v:specForAppIO" title="Haskemathesis.Integration.Hspec">specForAppIO</a></code>:</p><pre>main :: IO ()
main = do
    (spec, skipped) &lt;- specForAppIO defaultConfig openApiSpec myApp
    unless (null skipped) $
        hPutStrLn stderr $ &quot;Skipped streaming operations: &quot; ++ show skipped
    hspec spec
</pre><p>For streaming endpoints, use <code><a href="Haskemathesis-Integration-Hspec.html#v:specForUrl" title="Haskemathesis.Integration.Hspec">specForUrl</a></code> with a running HTTP server
which properly handles timeouts.</p></div></div><div id="synopsis"><details id="syn"><summary>Synopsis</summary><ul class="details-toggle" data-details-id="syn"><li class="src short"><a href="#v:specForApp">specForApp</a> :: <a href="${pkgroot}/../../../../i6dn6airzp2fb6gj0vqpriavxp098129-ghc-9.10.3-doc/share/doc/ghc/html/libraries/base-4.20.2.0-7807/Data-Maybe.html#t:Maybe" title="Data.Maybe">Maybe</a> <a href="Haskemathesis-Execute-Types.html#t:BaseUrl" title="Haskemathesis.Execute.Types">BaseUrl</a> -&gt; [<a href="Haskemathesis-Check-Types.html#t:Check" title="Haskemathesis.Check.Types">Check</a>] -&gt; <a href="file:///nix/store/n9bq8nyqbcrs9rhllk8bh2xqlhba601s-openapi3-3.2.4-doc/share/doc/openapi3-3.2.4/html/Data-OpenApi-Internal.html#t:OpenApi" title="Data.OpenApi.Internal">OpenApi</a> -&gt; <a href="file:///nix/store/lwc9snjq2izyxa0840h8rp6r9f5za4cc-wai-3.2.4-doc/share/doc/wai-3.2.4/html/Network-Wai.html#t:Application" title="Network.Wai">Application</a> -&gt; <a href="file:///nix/store/5vhgdsj280ak61aqxp82icikr96pb068-hspec-2.11.16-doc/share/doc/hspec-2.11.16/html/Test-Hspec.html#t:Spec" title="Test.Hspec">Spec</a></li><li class="src short"><a href="#v:specForAppWithConfig">specForAppWithConfig</a> :: <a href="Haskemathesis-Config.html#t:TestConfig" title="Haskemathesis.Config">TestConfig</a> -&gt; <a href="file:///nix/store/n9bq8nyqbcrs9rhllk8bh2xqlhba601s-openapi3-3.2.4-doc/share/doc/openapi3-3.2.4/html/Data-OpenApi-Internal.html#t:OpenApi" title="Data.OpenApi.Internal">OpenApi</a> -&gt; <a href="file:///nix/store/lwc9snjq2izyxa0840h8rp6r9f5za4cc-wai-3.2.4-doc/share/doc/wai-3.2.4/html/Network-Wai.html#t:Application" title="Network.Wai">Application</a> -&gt; <a href="file:///nix/store/5vhgdsj280ak61aqxp82icikr96pb068-hspec-2.11.16-doc/share/doc/hspec-2.11.16/html/Test-Hspec.html#t:Spec" title="Test.Hspec">Spec</a></li><li class="src short"><a href="#v:specForExecutor">specForExecutor</a> :: <a href="${pkgroot}/../../../../i6dn6airzp2fb6gj0vqpriavxp098129-ghc-9.10.3-doc/share/doc/ghc/html/libraries/base-4.20.2.0-7807/Data-Maybe.html#t:Maybe" title="Data.Maybe">Maybe</a> <a href="Haskemathesis-Execute-Types.html#t:BaseUrl" title="Haskemathesis.Execute.Types">BaseUrl</a> -&gt; [<a href="Haskemathesis-Check-Types.html#t:Check" title="Haskemathesis.Check.Types">Check</a>] -&gt; <a href="Haskemathesis-Execute-Types.html#t:ExecutorWithTimeout" title="Haskemathesis.Execute.Types">ExecutorWithTimeout</a> -&gt; [<a href="Haskemathesis-OpenApi-Types.html#t:ResolvedOperation" title="Haskemathesis.OpenApi.Types">ResolvedOperation</a>] -&gt; <a href="file:///nix/store/5vhgdsj280ak61aqxp82icikr96pb068-hspec-2.11.16-doc/share/doc/hspec-2.11.16/html/Test-Hspec.html#t:Spec" title="Test.Hspec">Spec</a></li><li class="src short"><a href="#v:specForExecutorWithConfig">specForExecutorWithConfig</a> :: <a href="file:///nix/store/n9bq8nyqbcrs9rhllk8bh2xqlhba601s-openapi3-3.2.4-doc/share/doc/openapi3-3.2.4/html/Data-OpenApi-Internal.html#t:OpenApi" title="Data.OpenApi.Internal">OpenApi</a> -&gt; <a href="Haskemathesis-Config.html#t:TestConfig" title="Haskemathesis.Config">TestConfig</a> -&gt; <a href="Haskemathesis-Execute-Types.html#t:ExecutorWithTimeout" title="Haskemathesis.Execute.Types">ExecutorWithTimeout</a> -&gt; [<a href="Haskemathesis-OpenApi-Types.html#t:ResolvedOperation" title="Haskemathesis.OpenApi.Types">ResolvedOperation</a>] -&gt; <a href="file:///nix/store/5vhgdsj280ak61aqxp82icikr96pb068-hspec-2.11.16-doc/share/doc/hspec-2.11.16/html/Test-Hspec.html#t:Spec" title="Test.Hspec">Spec</a></li><li class="src short"><a href="#v:specForUrl">specForUrl</a> :: <a href="Haskemathesis-Config.html#t:TestConfig" title="Haskemathesis.Config">TestConfig</a> -&gt; <a href="file:///nix/store/n9bq8nyqbcrs9rhllk8bh2xqlhba601s-openapi3-3.2.4-doc/share/doc/openapi3-3.2.4/html/Data-OpenApi-Internal.html#t:OpenApi" title="Data.OpenApi.Internal">OpenApi</a> -&gt; <a href="file:///nix/store/bnr86jl784iw2vjhcpn7dxsaycwawf4d-http-client-0.7.19-doc/share/doc/http-client-0.7.19/html/Network-HTTP-Client.html#t:Manager" title="Network.HTTP.Client">Manager</a> -&gt; <a href="Haskemathesis-Execute-Types.html#t:BaseUrl" title="Haskemathesis.Execute.Types">BaseUrl</a> -&gt; <a href="file:///nix/store/5vhgdsj280ak61aqxp82icikr96pb068-hspec-2.11.16-doc/share/doc/hspec-2.11.16/html/Test-Hspec.html#t:Spec" title="Test.Hspec">Spec</a></li><li class="src short"><a href="#v:specForAppIO">specForAppIO</a> :: <a href="Haskemathesis-Config.html#t:TestConfig" title="Haskemathesis.Config">TestConfig</a> -&gt; <a href="file:///nix/store/n9bq8nyqbcrs9rhllk8bh2xqlhba601s-openapi3-3.2.4-doc/share/doc/openapi3-3.2.4/html/Data-OpenApi-Internal.html#t:OpenApi" title="Data.OpenApi.Internal">OpenApi</a> -&gt; <a href="file:///nix/store/lwc9snjq2izyxa0840h8rp6r9f5za4cc-wai-3.2.4-doc/share/doc/wai-3.2.4/html/Network-Wai.html#t:Application" title="Network.Wai">Application</a> -&gt; <a href="${pkgroot}/../../../../i6dn6airzp2fb6gj0vqpriavxp098129-ghc-9.10.3-doc/share/doc/ghc/html/libraries/base-4.20.2.0-7807/Prelude.html#t:IO" title="Prelude">IO</a> (<a href="file:///nix/store/5vhgdsj280ak61aqxp82icikr96pb068-hspec-2.11.16-doc/share/doc/hspec-2.11.16/html/Test-Hspec.html#t:Spec" title="Test.Hspec">Spec</a>, [<a href="${pkgroot}/../../../../i6dn6airzp2fb6gj0vqpriavxp098129-ghc-9.10.3-doc/share/doc/ghc/html/libraries/text-2.1.3-cd15/Data-Text.html#t:Text" title="Data.Text">Text</a>])</li><li class="src short"><a href="#v:specForAppNegativeIO">specForAppNegativeIO</a> :: <a href="Haskemathesis-Config.html#t:TestConfig" title="Haskemathesis.Config">TestConfig</a> -&gt; <a href="file:///nix/store/n9bq8nyqbcrs9rhllk8bh2xqlhba601s-openapi3-3.2.4-doc/share/doc/openapi3-3.2.4/html/Data-OpenApi-Internal.html#t:OpenApi" title="Data.OpenApi.Internal">OpenApi</a> -&gt; <a href="file:///nix/store/lwc9snjq2izyxa0840h8rp6r9f5za4cc-wai-3.2.4-doc/share/doc/wai-3.2.4/html/Network-Wai.html#t:Application" title="Network.Wai">Application</a> -&gt; <a href="${pkgroot}/../../../../i6dn6airzp2fb6gj0vqpriavxp098129-ghc-9.10.3-doc/share/doc/ghc/html/libraries/base-4.20.2.0-7807/Prelude.html#t:IO" title="Prelude">IO</a> (<a href="file:///nix/store/5vhgdsj280ak61aqxp82icikr96pb068-hspec-2.11.16-doc/share/doc/hspec-2.11.16/html/Test-Hspec.html#t:Spec" title="Test.Hspec">Spec</a>, [<a href="${pkgroot}/../../../../i6dn6airzp2fb6gj0vqpriavxp098129-ghc-9.10.3-doc/share/doc/ghc/html/libraries/text-2.1.3-cd15/Data-Text.html#t:Text" title="Data.Text">Text</a>])</li><li class="src short"><a href="#v:specForExecutorNegative">specForExecutorNegative</a> :: <a href="file:///nix/store/n9bq8nyqbcrs9rhllk8bh2xqlhba601s-openapi3-3.2.4-doc/share/doc/openapi3-3.2.4/html/Data-OpenApi-Internal.html#t:OpenApi" title="Data.OpenApi.Internal">OpenApi</a> -&gt; <a href="Haskemathesis-Config.html#t:TestConfig" title="Haskemathesis.Config">TestConfig</a> -&gt; <a href="Haskemathesis-Execute-Types.html#t:ExecutorWithTimeout" title="Haskemathesis.Execute.Types">ExecutorWithTimeout</a> -&gt; [<a href="Haskemathesis-OpenApi-Types.html#t:ResolvedOperation" title="Haskemathesis.OpenApi.Types">ResolvedOperation</a>] -&gt; <a href="file:///nix/store/5vhgdsj280ak61aqxp82icikr96pb068-hspec-2.11.16-doc/share/doc/hspec-2.11.16/html/Test-Hspec.html#t:Spec" title="Test.Hspec">Spec</a></li><li class="src short"><a href="#v:specForAppNegative">specForAppNegative</a> :: <a href="Haskemathesis-Config.html#t:TestConfig" title="Haskemathesis.Config">TestConfig</a> -&gt; <a href="file:///nix/store/n9bq8nyqbcrs9rhllk8bh2xqlhba601s-openapi3-3.2.4-doc/share/doc/openapi3-3.2.4/html/Data-OpenApi-Internal.html#t:OpenApi" title="Data.OpenApi.Internal">OpenApi</a> -&gt; <a href="file:///nix/store/lwc9snjq2izyxa0840h8rp6r9f5za4cc-wai-3.2.4-doc/share/doc/wai-3.2.4/html/Network-Wai.html#t:Application" title="Network.Wai">Application</a> -&gt; <a href="file:///nix/store/5vhgdsj280ak61aqxp82icikr96pb068-hspec-2.11.16-doc/share/doc/hspec-2.11.16/html/Test-Hspec.html#t:Spec" title="Test.Hspec">Spec</a></li><li class="src short"><a href="#v:specForUrlNegative">specForUrlNegative</a> :: <a href="Haskemathesis-Config.html#t:TestConfig" title="Haskemathesis.Config">TestConfig</a> -&gt; <a href="file:///nix/store/n9bq8nyqbcrs9rhllk8bh2xqlhba601s-openapi3-3.2.4-doc/share/doc/openapi3-3.2.4/html/Data-OpenApi-Internal.html#t:OpenApi" title="Data.OpenApi.Internal">OpenApi</a> -&gt; <a href="file:///nix/store/bnr86jl784iw2vjhcpn7dxsaycwawf4d-http-client-0.7.19-doc/share/doc/http-client-0.7.19/html/Network-HTTP-Client.html#t:Manager" title="Network.HTTP.Client">Manager</a> -&gt; <a href="Haskemathesis-Execute-Types.html#t:BaseUrl" title="Haskemathesis.Execute.Types">BaseUrl</a> -&gt; <a href="file:///nix/store/5vhgdsj280ak61aqxp82icikr96pb068-hspec-2.11.16-doc/share/doc/hspec-2.11.16/html/Test-Hspec.html#t:Spec" title="Test.Hspec">Spec</a></li></ul></details></div><div id="interface"><a href="#g:1" id="g:1"><h1>Standard testing (WAI Application)</h1></a><div class="top"><p class="src"><a id="v:specForApp" class="def">specForApp</a> :: <a href="${pkgroot}/../../../../i6dn6airzp2fb6gj0vqpriavxp098129-ghc-9.10.3-doc/share/doc/ghc/html/libraries/base-4.20.2.0-7807/Data-Maybe.html#t:Maybe" title="Data.Maybe">Maybe</a> <a href="Haskemathesis-Execute-Types.html#t:BaseUrl" title="Haskemathesis.Execute.Types">BaseUrl</a> -&gt; [<a href="Haskemathesis-Check-Types.html#t:Check" title="Haskemathesis.Check.Types">Check</a>] -&gt; <a href="file:///nix/store/n9bq8nyqbcrs9rhllk8bh2xqlhba601s-openapi3-3.2.4-doc/share/doc/openapi3-3.2.4/html/Data-OpenApi-Internal.html#t:OpenApi" title="Data.OpenApi.Internal">OpenApi</a> -&gt; <a href="file:///nix/store/lwc9snjq2izyxa0840h8rp6r9f5za4cc-wai-3.2.4-doc/share/doc/wai-3.2.4/html/Network-Wai.html#t:Application" title="Network.Wai">Application</a> -&gt; <a href="file:///nix/store/5vhgdsj280ak61aqxp82icikr96pb068-hspec-2.11.16-doc/share/doc/hspec-2.11.16/html/Test-Hspec.html#t:Spec" title="Test.Hspec">Spec</a> <a href="src/Haskemathesis.Integration.Hspec.html#specForApp" class="link">Source</a> <a href="#v:specForApp" class="selflink">#</a></p><div class="doc"><p>Create an Hspec <code><a href="file:///nix/store/5vhgdsj280ak61aqxp82icikr96pb068-hspec-2.11.16-doc/share/doc/hspec-2.11.16/html/Test-Hspec.html#t:Spec" title="Test.Hspec">Spec</a></code> for a WAI <code><a href="file:///nix/store/lwc9snjq2izyxa0840h8rp6r9f5za4cc-wai-3.2.4-doc/share/doc/wai-3.2.4/html/Network-Wai.html#t:Application" title="Network.Wai">Application</a></code>.</p><p>This is the simplest way to test a WAI application against an OpenAPI
specification. Operations are automatically resolved from the spec.</p><p><strong>Note:</strong> Streaming operations (SSE, NDJSON) are automatically filtered
out because WAI testing is synchronous and cannot handle streaming
responses. Use <code><a href="Haskemathesis-Integration-Hspec.html#v:specForAppIO" title="Haskemathesis.Integration.Hspec">specForAppIO</a></code> if you need to know which operations
were skipped.</p><h4>Parameters</h4><ul><li><code>mBase</code> - Optional base URL for error reporting</li><li><code>checks</code> - List of conformance checks to run</li><li><code>openApi</code> - The OpenAPI specification</li><li><code>app</code> - The WAI application to test</li></ul><h4>Example</h4><pre>import Haskemathesis.Check.Standard (standardChecks)

spec :: Spec
spec = specForApp Nothing standardChecks openApiSpec myApp
</pre></div></div><div class="top"><p class="src"><a id="v:specForAppWithConfig" class="def">specForAppWithConfig</a> :: <a href="Haskemathesis-Config.html#t:TestConfig" title="Haskemathesis.Config">TestConfig</a> -&gt; <a href="file:///nix/store/n9bq8nyqbcrs9rhllk8bh2xqlhba601s-openapi3-3.2.4-doc/share/doc/openapi3-3.2.4/html/Data-OpenApi-Internal.html#t:OpenApi" title="Data.OpenApi.Internal">OpenApi</a> -&gt; <a href="file:///nix/store/lwc9snjq2izyxa0840h8rp6r9f5za4cc-wai-3.2.4-doc/share/doc/wai-3.2.4/html/Network-Wai.html#t:Application" title="Network.Wai">Application</a> -&gt; <a href="file:///nix/store/5vhgdsj280ak61aqxp82icikr96pb068-hspec-2.11.16-doc/share/doc/hspec-2.11.16/html/Test-Hspec.html#t:Spec" title="Test.Hspec">Spec</a> <a href="src/Haskemathesis.Integration.Hspec.html#specForAppWithConfig" class="link">Source</a> <a href="#v:specForAppWithConfig" class="selflink">#</a></p><div class="doc"><p>Create an Hspec <code><a href="file:///nix/store/5vhgdsj280ak61aqxp82icikr96pb068-hspec-2.11.16-doc/share/doc/hspec-2.11.16/html/Test-Hspec.html#t:Spec" title="Test.Hspec">Spec</a></code> for a WAI <code><a href="file:///nix/store/lwc9snjq2izyxa0840h8rp6r9f5za4cc-wai-3.2.4-doc/share/doc/wai-3.2.4/html/Network-Wai.html#t:Application" title="Network.Wai">Application</a></code> with full configuration.</p><p>Combines the convenience of WAI application testing with the flexibility
of <code><a href="Haskemathesis-Config.html#t:TestConfig" title="Haskemathesis.Config">TestConfig</a></code>. This is the recommended approach for most use cases.</p><p><strong>Note:</strong> Streaming operations (SSE, NDJSON) are automatically filtered
out because WAI testing is synchronous and cannot handle streaming
responses. Use <code><a href="Haskemathesis-Integration-Hspec.html#v:specForAppIO" title="Haskemathesis.Integration.Hspec">specForAppIO</a></code> if you need to know which operations
were skipped.</p><h4>Parameters</h4><ul><li><code>config</code> - Test configuration</li><li><code>openApi</code> - The OpenAPI specification</li><li><code>app</code> - The WAI application to test</li></ul><h4>Example</h4><pre>import Haskemathesis.Config

spec :: Spec
spec = specForAppWithConfig defaultConfig openApiSpec myApp
</pre></div></div><a href="#g:2" id="g:2"><h1>Standard testing (custom executor)</h1></a><div class="top"><p class="src"><a id="v:specForExecutor" class="def">specForExecutor</a> :: <a href="${pkgroot}/../../../../i6dn6airzp2fb6gj0vqpriavxp098129-ghc-9.10.3-doc/share/doc/ghc/html/libraries/base-4.20.2.0-7807/Data-Maybe.html#t:Maybe" title="Data.Maybe">Maybe</a> <a href="Haskemathesis-Execute-Types.html#t:BaseUrl" title="Haskemathesis.Execute.Types">BaseUrl</a> -&gt; [<a href="Haskemathesis-Check-Types.html#t:Check" title="Haskemathesis.Check.Types">Check</a>] -&gt; <a href="Haskemathesis-Execute-Types.html#t:ExecutorWithTimeout" title="Haskemathesis.Execute.Types">ExecutorWithTimeout</a> -&gt; [<a href="Haskemathesis-OpenApi-Types.html#t:ResolvedOperation" title="Haskemathesis.OpenApi.Types">ResolvedOperation</a>] -&gt; <a href="file:///nix/store/5vhgdsj280ak61aqxp82icikr96pb068-hspec-2.11.16-doc/share/doc/hspec-2.11.16/html/Test-Hspec.html#t:Spec" title="Test.Hspec">Spec</a> <a href="src/Haskemathesis.Integration.Hspec.html#specForExecutor" class="link">Source</a> <a href="#v:specForExecutor" class="selflink">#</a></p><div class="doc"><p>Create an Hspec <code><a href="file:///nix/store/5vhgdsj280ak61aqxp82icikr96pb068-hspec-2.11.16-doc/share/doc/hspec-2.11.16/html/Test-Hspec.html#t:Spec" title="Test.Hspec">Spec</a></code> from pre-resolved operations with a custom executor.</p><p>This is the most flexible form, allowing you to provide your own request
executor function and pre-resolved operations. Use this when you need
fine-grained control over request execution.</p><h4>Parameters</h4><ul><li><code>mBase</code> - Optional base URL for error reporting</li><li><code>checks</code> - List of conformance checks to run</li><li><code>execute</code> - Function to execute API requests</li><li><code>ops</code> - List of resolved operations to test</li></ul><h4>Example</h4><pre>spec :: Spec
spec = specForExecutor (Just &quot;<a href="http://localhost:8080&quot;)">http://localhost:8080&quot;)</a> checks myExecutor ops
</pre></div></div><div class="top"><p class="src"><a id="v:specForExecutorWithConfig" class="def">specForExecutorWithConfig</a> :: <a href="file:///nix/store/n9bq8nyqbcrs9rhllk8bh2xqlhba601s-openapi3-3.2.4-doc/share/doc/openapi3-3.2.4/html/Data-OpenApi-Internal.html#t:OpenApi" title="Data.OpenApi.Internal">OpenApi</a> -&gt; <a href="Haskemathesis-Config.html#t:TestConfig" title="Haskemathesis.Config">TestConfig</a> -&gt; <a href="Haskemathesis-Execute-Types.html#t:ExecutorWithTimeout" title="Haskemathesis.Execute.Types">ExecutorWithTimeout</a> -&gt; [<a href="Haskemathesis-OpenApi-Types.html#t:ResolvedOperation" title="Haskemathesis.OpenApi.Types">ResolvedOperation</a>] -&gt; <a href="file:///nix/store/5vhgdsj280ak61aqxp82icikr96pb068-hspec-2.11.16-doc/share/doc/hspec-2.11.16/html/Test-Hspec.html#t:Spec" title="Test.Hspec">Spec</a> <a href="src/Haskemathesis.Integration.Hspec.html#specForExecutorWithConfig" class="link">Source</a> <a href="#v:specForExecutorWithConfig" class="selflink">#</a></p><div class="doc"><p>Create an Hspec <code><a href="file:///nix/store/5vhgdsj280ak61aqxp82icikr96pb068-hspec-2.11.16-doc/share/doc/hspec-2.11.16/html/Test-Hspec.html#t:Spec" title="Test.Hspec">Spec</a></code> with full configuration and custom executor.</p><p>This variant allows you to use a <code><a href="Haskemathesis-Config.html#t:TestConfig" title="Haskemathesis.Config">TestConfig</a></code> for fine-grained control
over test behavior including operation filtering, authentication, and
negative testing.</p><h4>Parameters</h4><ul><li><code>openApi</code> - The OpenAPI specification (used for request generation)</li><li><code>config</code> - Test configuration</li><li><code>execute</code> - Function to execute API requests</li><li><code>ops</code> - List of resolved operations to test</li></ul><h4>Example</h4><pre>let config = defaultConfig { tcTestCount = 50 }
spec = specForExecutorWithConfig openApiSpec config myExecutor ops
</pre></div></div><a href="#g:3" id="g:3"><h1>Standard testing (HTTP client)</h1></a><div class="top"><p class="src"><a id="v:specForUrl" class="def">specForUrl</a> :: <a href="Haskemathesis-Config.html#t:TestConfig" title="Haskemathesis.Config">TestConfig</a> -&gt; <a href="file:///nix/store/n9bq8nyqbcrs9rhllk8bh2xqlhba601s-openapi3-3.2.4-doc/share/doc/openapi3-3.2.4/html/Data-OpenApi-Internal.html#t:OpenApi" title="Data.OpenApi.Internal">OpenApi</a> -&gt; <a href="file:///nix/store/bnr86jl784iw2vjhcpn7dxsaycwawf4d-http-client-0.7.19-doc/share/doc/http-client-0.7.19/html/Network-HTTP-Client.html#t:Manager" title="Network.HTTP.Client">Manager</a> -&gt; <a href="Haskemathesis-Execute-Types.html#t:BaseUrl" title="Haskemathesis.Execute.Types">BaseUrl</a> -&gt; <a href="file:///nix/store/5vhgdsj280ak61aqxp82icikr96pb068-hspec-2.11.16-doc/share/doc/hspec-2.11.16/html/Test-Hspec.html#t:Spec" title="Test.Hspec">Spec</a> <a href="src/Haskemathesis.Integration.Hspec.html#specForUrl" class="link">Source</a> <a href="#v:specForUrl" class="selflink">#</a></p><div class="doc"><p>Create an Hspec <code><a href="file:///nix/store/5vhgdsj280ak61aqxp82icikr96pb068-hspec-2.11.16-doc/share/doc/hspec-2.11.16/html/Test-Hspec.html#t:Spec" title="Test.Hspec">Spec</a></code> for testing a remote HTTP server.</p><p>This variant uses an HTTP client manager to make real network requests
to a running server. Useful for integration testing against deployed
services or external APIs.</p><h4>Parameters</h4><ul><li><code>config</code> - Test configuration</li><li><code>openApi</code> - The OpenAPI specification</li><li><code>manager</code> - HTTP client manager for making requests</li><li><code>baseUrl</code> - Base URL of the server to test</li></ul><h4>Example</h4><pre>import Network.HTTP.Client (newManager, defaultManagerSettings)

spec :: Spec
spec = do
   manager &lt;- runIO $ newManager defaultManagerSettings
   specForUrl defaultConfig openApiSpec manager &quot;<a href="http://localhost:8080&quot;">http://localhost:8080&quot;</a>
</pre></div></div><a href="#g:4" id="g:4"><h1>WAI with Streaming Info</h1></a><div class="top"><p class="src"><a id="v:specForAppIO" class="def">specForAppIO</a> :: <a href="Haskemathesis-Config.html#t:TestConfig" title="Haskemathesis.Config">TestConfig</a> -&gt; <a href="file:///nix/store/n9bq8nyqbcrs9rhllk8bh2xqlhba601s-openapi3-3.2.4-doc/share/doc/openapi3-3.2.4/html/Data-OpenApi-Internal.html#t:OpenApi" title="Data.OpenApi.Internal">OpenApi</a> -&gt; <a href="file:///nix/store/lwc9snjq2izyxa0840h8rp6r9f5za4cc-wai-3.2.4-doc/share/doc/wai-3.2.4/html/Network-Wai.html#t:Application" title="Network.Wai">Application</a> -&gt; <a href="${pkgroot}/../../../../i6dn6airzp2fb6gj0vqpriavxp098129-ghc-9.10.3-doc/share/doc/ghc/html/libraries/base-4.20.2.0-7807/Prelude.html#t:IO" title="Prelude">IO</a> (<a href="file:///nix/store/5vhgdsj280ak61aqxp82icikr96pb068-hspec-2.11.16-doc/share/doc/hspec-2.11.16/html/Test-Hspec.html#t:Spec" title="Test.Hspec">Spec</a>, [<a href="${pkgroot}/../../../../i6dn6airzp2fb6gj0vqpriavxp098129-ghc-9.10.3-doc/share/doc/ghc/html/libraries/text-2.1.3-cd15/Data-Text.html#t:Text" title="Data.Text">Text</a>]) <a href="src/Haskemathesis.Integration.Hspec.html#specForAppIO" class="link">Source</a> <a href="#v:specForAppIO" class="selflink">#</a></p><div class="doc"><p>Create an Hspec <code><a href="file:///nix/store/5vhgdsj280ak61aqxp82icikr96pb068-hspec-2.11.16-doc/share/doc/hspec-2.11.16/html/Test-Hspec.html#t:Spec" title="Test.Hspec">Spec</a></code> from a WAI <code><a href="file:///nix/store/lwc9snjq2izyxa0840h8rp6r9f5za4cc-wai-3.2.4-doc/share/doc/wai-3.2.4/html/Network-Wai.html#t:Application" title="Network.Wai">Application</a></code>, returning skipped operations.</p><p>Like <code><a href="Haskemathesis-Integration-Hspec.html#v:specForAppWithConfig" title="Haskemathesis.Integration.Hspec">specForAppWithConfig</a></code>, but returns the list of operations that were
skipped due to being streaming endpoints. Also prints a warning to stderr
if any operations are skipped.</p><p>Streaming operations (SSE, NDJSON) cannot be tested with WAI because WAI
testing is synchronous and in-memory. For streaming endpoints, use
<code><a href="Haskemathesis-Integration-Hspec.html#v:specForUrl" title="Haskemathesis.Integration.Hspec">specForUrl</a></code> with a running HTTP server.</p><h4>Parameters</h4><ul><li><code>config</code> - Test configuration</li><li><code>openApi</code> - The OpenAPI specification</li><li><code>app</code> - The WAI application to test</li></ul><h4>Return Value</h4><p>Returns a tuple of:</p><ul><li>The Hspec <code><a href="file:///nix/store/5vhgdsj280ak61aqxp82icikr96pb068-hspec-2.11.16-doc/share/doc/hspec-2.11.16/html/Test-Hspec.html#t:Spec" title="Test.Hspec">Spec</a></code> for non-streaming operations</li><li>List of operation labels that were skipped (streaming operations)</li></ul><h4>Example</h4><pre>main :: IO ()
main = do
    (spec, skipped) &lt;- specForAppIO defaultConfig openApiSpec myApp
    unless (null skipped) $
        putStrLn $ &quot;Note: &quot; ++ show (length skipped) ++ &quot; streaming ops skipped&quot;
    hspec spec
</pre></div></div><div class="top"><p class="src"><a id="v:specForAppNegativeIO" class="def">specForAppNegativeIO</a> :: <a href="Haskemathesis-Config.html#t:TestConfig" title="Haskemathesis.Config">TestConfig</a> -&gt; <a href="file:///nix/store/n9bq8nyqbcrs9rhllk8bh2xqlhba601s-openapi3-3.2.4-doc/share/doc/openapi3-3.2.4/html/Data-OpenApi-Internal.html#t:OpenApi" title="Data.OpenApi.Internal">OpenApi</a> -&gt; <a href="file:///nix/store/lwc9snjq2izyxa0840h8rp6r9f5za4cc-wai-3.2.4-doc/share/doc/wai-3.2.4/html/Network-Wai.html#t:Application" title="Network.Wai">Application</a> -&gt; <a href="${pkgroot}/../../../../i6dn6airzp2fb6gj0vqpriavxp098129-ghc-9.10.3-doc/share/doc/ghc/html/libraries/base-4.20.2.0-7807/Prelude.html#t:IO" title="Prelude">IO</a> (<a href="file:///nix/store/5vhgdsj280ak61aqxp82icikr96pb068-hspec-2.11.16-doc/share/doc/hspec-2.11.16/html/Test-Hspec.html#t:Spec" title="Test.Hspec">Spec</a>, [<a href="${pkgroot}/../../../../i6dn6airzp2fb6gj0vqpriavxp098129-ghc-9.10.3-doc/share/doc/ghc/html/libraries/text-2.1.3-cd15/Data-Text.html#t:Text" title="Data.Text">Text</a>]) <a href="src/Haskemathesis.Integration.Hspec.html#specForAppNegativeIO" class="link">Source</a> <a href="#v:specForAppNegativeIO" class="selflink">#</a></p><div class="doc"><p>Create a negative testing <code><a href="file:///nix/store/5vhgdsj280ak61aqxp82icikr96pb068-hspec-2.11.16-doc/share/doc/hspec-2.11.16/html/Test-Hspec.html#t:Spec" title="Test.Hspec">Spec</a></code> from a WAI <code><a href="file:///nix/store/lwc9snjq2izyxa0840h8rp6r9f5za4cc-wai-3.2.4-doc/share/doc/wai-3.2.4/html/Network-Wai.html#t:Application" title="Network.Wai">Application</a></code>, returning skipped operations.</p><p>Like <code><a href="Haskemathesis-Integration-Hspec.html#v:specForAppNegative" title="Haskemathesis.Integration.Hspec">specForAppNegative</a></code>, but returns the list of operations that were
skipped due to being streaming endpoints. Also prints a warning to stderr
if any operations are skipped.</p><h4>Parameters</h4><ul><li><code>config</code> - Test configuration</li><li><code>openApi</code> - The OpenAPI specification</li><li><code>app</code> - The WAI application to test</li></ul><h4>Return Value</h4><p>Returns a tuple of:</p><ul><li>The Hspec <code><a href="file:///nix/store/5vhgdsj280ak61aqxp82icikr96pb068-hspec-2.11.16-doc/share/doc/hspec-2.11.16/html/Test-Hspec.html#t:Spec" title="Test.Hspec">Spec</a></code> for non-streaming operations (negative tests)</li><li>List of operation labels that were skipped (streaming operations)</li></ul></div></div><a href="#g:5" id="g:5"><h1>Negative testing</h1></a><div class="top"><p class="src"><a id="v:specForExecutorNegative" class="def">specForExecutorNegative</a> :: <a href="file:///nix/store/n9bq8nyqbcrs9rhllk8bh2xqlhba601s-openapi3-3.2.4-doc/share/doc/openapi3-3.2.4/html/Data-OpenApi-Internal.html#t:OpenApi" title="Data.OpenApi.Internal">OpenApi</a> -&gt; <a href="Haskemathesis-Config.html#t:TestConfig" title="Haskemathesis.Config">TestConfig</a> -&gt; <a href="Haskemathesis-Execute-Types.html#t:ExecutorWithTimeout" title="Haskemathesis.Execute.Types">ExecutorWithTimeout</a> -&gt; [<a href="Haskemathesis-OpenApi-Types.html#t:ResolvedOperation" title="Haskemathesis.OpenApi.Types">ResolvedOperation</a>] -&gt; <a href="file:///nix/store/5vhgdsj280ak61aqxp82icikr96pb068-hspec-2.11.16-doc/share/doc/hspec-2.11.16/html/Test-Hspec.html#t:Spec" title="Test.Hspec">Spec</a> <a href="src/Haskemathesis.Integration.Hspec.html#specForExecutorNegative" class="link">Source</a> <a href="#v:specForExecutorNegative" class="selflink">#</a></p><div class="doc"><p>Create an Hspec <code><a href="file:///nix/store/5vhgdsj280ak61aqxp82icikr96pb068-hspec-2.11.16-doc/share/doc/hspec-2.11.16/html/Test-Hspec.html#t:Spec" title="Test.Hspec">Spec</a></code> for negative testing with a custom executor.</p><p>Negative testing sends intentionally malformed requests to verify that
the API correctly rejects invalid input. This helps ensure proper input
validation and error handling.</p><h4>Parameters</h4><ul><li><code>openApi</code> - The OpenAPI specification</li><li><code>config</code> - Test configuration (negative testing is enabled automatically)</li><li><code>execute</code> - Function to execute API requests</li><li><code>ops</code> - List of resolved operations to test</li></ul><h4>What is tested</h4><ul><li>Missing required parameters (path, query, header)</li><li>Invalid parameter values (wrong types)</li><li>Invalid request bodies</li><li>Wrong content types</li></ul></div></div><div class="top"><p class="src"><a id="v:specForAppNegative" class="def">specForAppNegative</a> :: <a href="Haskemathesis-Config.html#t:TestConfig" title="Haskemathesis.Config">TestConfig</a> -&gt; <a href="file:///nix/store/n9bq8nyqbcrs9rhllk8bh2xqlhba601s-openapi3-3.2.4-doc/share/doc/openapi3-3.2.4/html/Data-OpenApi-Internal.html#t:OpenApi" title="Data.OpenApi.Internal">OpenApi</a> -&gt; <a href="file:///nix/store/lwc9snjq2izyxa0840h8rp6r9f5za4cc-wai-3.2.4-doc/share/doc/wai-3.2.4/html/Network-Wai.html#t:Application" title="Network.Wai">Application</a> -&gt; <a href="file:///nix/store/5vhgdsj280ak61aqxp82icikr96pb068-hspec-2.11.16-doc/share/doc/hspec-2.11.16/html/Test-Hspec.html#t:Spec" title="Test.Hspec">Spec</a> <a href="src/Haskemathesis.Integration.Hspec.html#specForAppNegative" class="link">Source</a> <a href="#v:specForAppNegative" class="selflink">#</a></p><div class="doc"><p>Create an Hspec <code><a href="file:///nix/store/5vhgdsj280ak61aqxp82icikr96pb068-hspec-2.11.16-doc/share/doc/hspec-2.11.16/html/Test-Hspec.html#t:Spec" title="Test.Hspec">Spec</a></code> for negative testing of a WAI <code><a href="file:///nix/store/lwc9snjq2izyxa0840h8rp6r9f5za4cc-wai-3.2.4-doc/share/doc/wai-3.2.4/html/Network-Wai.html#t:Application" title="Network.Wai">Application</a></code>.</p><p>Convenience wrapper around <code><a href="Haskemathesis-Integration-Hspec.html#v:specForExecutorNegative" title="Haskemathesis.Integration.Hspec">specForExecutorNegative</a></code> for WAI applications.</p><p><strong>Note:</strong> Streaming operations (SSE, NDJSON) are automatically filtered
out because WAI testing is synchronous and cannot handle streaming
responses. Use <code><a href="Haskemathesis-Integration-Hspec.html#v:specForAppNegativeIO" title="Haskemathesis.Integration.Hspec">specForAppNegativeIO</a></code> if you need to know which operations
were skipped.</p><h4>Parameters</h4><ul><li><code>config</code> - Test configuration</li><li><code>openApi</code> - The OpenAPI specification</li><li><code>app</code> - The WAI application to test</li></ul><h4>Example</h4><pre>-- Test that invalid requests are properly rejected
negativeSpec :: Spec
negativeSpec = specForAppNegative defaultConfig openApiSpec myApp
</pre></div></div><div class="top"><p class="src"><a id="v:specForUrlNegative" class="def">specForUrlNegative</a> :: <a href="Haskemathesis-Config.html#t:TestConfig" title="Haskemathesis.Config">TestConfig</a> -&gt; <a href="file:///nix/store/n9bq8nyqbcrs9rhllk8bh2xqlhba601s-openapi3-3.2.4-doc/share/doc/openapi3-3.2.4/html/Data-OpenApi-Internal.html#t:OpenApi" title="Data.OpenApi.Internal">OpenApi</a> -&gt; <a href="file:///nix/store/bnr86jl784iw2vjhcpn7dxsaycwawf4d-http-client-0.7.19-doc/share/doc/http-client-0.7.19/html/Network-HTTP-Client.html#t:Manager" title="Network.HTTP.Client">Manager</a> -&gt; <a href="Haskemathesis-Execute-Types.html#t:BaseUrl" title="Haskemathesis.Execute.Types">BaseUrl</a> -&gt; <a href="file:///nix/store/5vhgdsj280ak61aqxp82icikr96pb068-hspec-2.11.16-doc/share/doc/hspec-2.11.16/html/Test-Hspec.html#t:Spec" title="Test.Hspec">Spec</a> <a href="src/Haskemathesis.Integration.Hspec.html#specForUrlNegative" class="link">Source</a> <a href="#v:specForUrlNegative" class="selflink">#</a></p><div class="doc"><p>Create an Hspec <code><a href="file:///nix/store/5vhgdsj280ak61aqxp82icikr96pb068-hspec-2.11.16-doc/share/doc/hspec-2.11.16/html/Test-Hspec.html#t:Spec" title="Test.Hspec">Spec</a></code> for negative testing of a remote HTTP server.</p><p>Convenience wrapper around <code><a href="Haskemathesis-Integration-Hspec.html#v:specForExecutorNegative" title="Haskemathesis.Integration.Hspec">specForExecutorNegative</a></code> for HTTP testing.</p><h4>Parameters</h4><ul><li><code>config</code> - Test configuration</li><li><code>openApi</code> - The OpenAPI specification</li><li><code>manager</code> - HTTP client manager for making requests</li><li><code>baseUrl</code> - Base URL of the server to test</li></ul><h4>Example</h4><pre>-- Test that the remote server rejects invalid requests
negativeSpec :: Spec
negativeSpec = do
   manager &lt;- runIO $ newManager defaultManagerSettings
   specForUrlNegative defaultConfig openApiSpec manager &quot;<a href="http://localhost:8080&quot;">http://localhost:8080&quot;</a>
</pre></div></div></div></div><div id="footer"><p>Produced by <a href="http://www.haskell.org/haddock/">Haddock</a> version 2.31.1</p></div></body></html>