<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd"><html xmlns="http://www.w3.org/1999/xhtml"><head><link rel="stylesheet" type="text/css" href="style.css" /><script type="text/javascript" src="highlight.js"></script></head><body><pre><span class="annot"><span class="hs-comment">{- | Load OpenAPI specs from YAML or JSON files.

This module provides functions for loading OpenAPI specifications
from disk. It supports both YAML and JSON formats, automatically
detecting the format based on file extension and content.

=== Basic Usage

Load a specification from a file:

@
import Haskemathesis.OpenApi.Loader (loadOpenApiFile)

main :: IO ()
main = do
    result &lt;- loadOpenApiFile &quot;api.yaml&quot;
    case result of
        Left err -&gt; putStrLn $ &quot;Failed to load: &quot; ++ show err
        Right spec -&gt; putStrLn &quot;Loaded successfully!&quot;
@

=== Error Handling

The loader returns 'Either Text OpenApi', where the Left case
contains a descriptive error message if parsing fails. This
can happen due to:

* File not found or unreadable
* Invalid YAML/JSON syntax
* Invalid OpenAPI structure (validation errors)

=== Supported Formats

* YAML files (.yaml, .yml extension)
* JSON files (.json extension)
* Files without extension (auto-detected by content)
-}</span></span><span>
</span><span id="line-38"></span><span class="hs-keyword">module</span><span> </span><span class="annot"><a href="Haskemathesis.OpenApi.Loader.html"><span class="hs-identifier">Haskemathesis.OpenApi.Loader</span></a></span><span> </span><span class="hs-special">(</span><span>
</span><span id="line-39"></span><span>    </span><span class="annot"><a href="Haskemathesis.OpenApi.Loader.html#loadOpenApiFile"><span class="hs-identifier">loadOpenApiFile</span></a></span><span class="hs-special">,</span><span>
</span><span id="line-40"></span><span class="hs-special">)</span><span>
</span><span id="line-41"></span><span class="hs-keyword">where</span><span>
</span><span id="line-42"></span><span>
</span><span id="line-43"></span><span class="hs-keyword">import</span><span> </span><span class="annot"><a href="file:///nix/store/n9bq8nyqbcrs9rhllk8bh2xqlhba601s-openapi3-3.2.4-doc/share/doc/openapi3-3.2.4/html/src/Data.OpenApi.html"><span class="hs-identifier">Data.OpenApi</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="file:///nix/store/n9bq8nyqbcrs9rhllk8bh2xqlhba601s-openapi3-3.2.4-doc/share/doc/openapi3-3.2.4/html/src/Data.OpenApi.Internal.html#OpenApi"><span class="hs-identifier">OpenApi</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-44"></span><span class="hs-keyword">import</span><span> </span><span class="annot"><span class="hs-identifier">Data.Text</span></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="hs-identifier">Text</span></span><span class="hs-special">)</span><span>
</span><span id="line-45"></span><span class="hs-keyword">import</span><span> </span><span class="hs-keyword">qualified</span><span> </span><span class="annot"><span class="hs-identifier">Data.Text</span></span><span> </span><span class="hs-keyword">as</span><span> </span><span class="annot"><span class="hs-identifier">T</span></span><span>
</span><span id="line-46"></span><span class="hs-keyword">import</span><span> </span><span class="annot"><a href="file:///nix/store/5yy64md1ny6jpffrkgsq9gn90diwkshl-yaml-0.11.11.2-doc/share/doc/yaml-0.11.11.2/html/src/Data.Yaml.html"><span class="hs-identifier">Data.Yaml</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="file:///nix/store/5yy64md1ny6jpffrkgsq9gn90diwkshl-yaml-0.11.11.2-doc/share/doc/yaml-0.11.11.2/html/src/Data.Yaml.html#decodeFileEither"><span class="hs-identifier">decodeFileEither</span></a></span><span class="hs-special">,</span><span> </span><span class="annot"><a href="file:///nix/store/5yy64md1ny6jpffrkgsq9gn90diwkshl-yaml-0.11.11.2-doc/share/doc/yaml-0.11.11.2/html/src/Data.Yaml.Internal.html#prettyPrintParseException"><span class="hs-identifier">prettyPrintParseException</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-47"></span><span>
</span><span id="line-48"></span><span class="annot"><span class="hs-comment">{- | Load an OpenAPI specification from a file.

This function reads a YAML or JSON file and parses it into an
'OpenApi' value. It automatically detects the file format.

=== Parameters

* @path@ - Path to the OpenAPI specification file

=== Return Value

Returns 'Right OpenApi' on success, or 'Left Text' with an error
message on failure.

=== Example

@
main :: IO ()
main = do
    result &lt;- loadOpenApiFile &quot;specs/api.yaml&quot;
    case result of
        Left err -&gt; putStrLn $ &quot;Error: &quot; ++ T.unpack err
        Right spec -&gt; do
            putStrLn $ &quot;Loaded API with &quot; ++ show (length spec) ++ &quot; paths&quot;
@
-}</span></span><span>
</span><span id="line-74"></span><span class="annot"><a href="Haskemathesis.OpenApi.Loader.html#loadOpenApiFile"><span class="hs-identifier hs-type">loadOpenApiFile</span></a></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="annot"><span class="hs-identifier hs-type">FilePath</span></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="hs-identifier hs-type">IO</span></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="hs-identifier hs-type">Either</span></span><span> </span><span class="annot"><span class="hs-identifier hs-type">Text</span></span><span> </span><span class="annot"><a href="file:///nix/store/n9bq8nyqbcrs9rhllk8bh2xqlhba601s-openapi3-3.2.4-doc/share/doc/openapi3-3.2.4/html/src/Data.OpenApi.Internal.html#OpenApi"><span class="hs-identifier hs-type">OpenApi</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-75"></span><span id="loadOpenApiFile"><span class="annot"><span class="annottext">loadOpenApiFile :: FilePath -&gt; IO (Either Text OpenApi)
</span><a href="Haskemathesis.OpenApi.Loader.html#loadOpenApiFile"><span class="hs-identifier hs-var hs-var">loadOpenApiFile</span></a></span></span><span> </span><span id="local-6989586621679199111"><span class="annot"><span class="annottext">FilePath
</span><a href="#local-6989586621679199111"><span class="hs-identifier hs-var">path</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="hs-keyword">do</span><span>
</span><span id="line-76"></span><span>    </span><span id="local-6989586621679199112"><span class="annot"><a href="#local-6989586621679199112"><span class="hs-identifier hs-var">result</span></a></span></span><span> </span><span class="hs-glyph">&lt;-</span><span> </span><span class="annot"><span class="annottext">FilePath -&gt; IO (Either ParseException OpenApi)
forall a. FromJSON a =&gt; FilePath -&gt; IO (Either ParseException a)
</span><a href="file:///nix/store/5yy64md1ny6jpffrkgsq9gn90diwkshl-yaml-0.11.11.2-doc/share/doc/yaml-0.11.11.2/html/src/Data.Yaml.html#decodeFileEither"><span class="hs-identifier hs-var">decodeFileEither</span></a></span><span> </span><span class="annot"><span class="annottext">FilePath
</span><a href="#local-6989586621679199111"><span class="hs-identifier hs-var">path</span></a></span><span>
</span><span id="line-77"></span><span>    </span><span class="annot"><span class="hs-identifier hs-type">pure</span></span><span> </span><span class="annot"><span class="hs-operator hs-type">$</span></span><span> </span><span class="hs-keyword">case</span><span> </span><span class="annot"><a href="#local-6989586621679199112"><span class="hs-identifier hs-type">result</span></a></span><span> </span><span class="hs-keyword">of</span><span>
</span><span id="line-78"></span><span>        </span><span class="annot"><span class="hs-identifier hs-type">Left</span></span><span> </span><span id="local-6989586621679199113"><span class="annot"><span class="annottext">ParseException
</span><a href="#local-6989586621679199113"><span class="hs-identifier hs-var">err</span></a></span></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="annottext">Text -&gt; Either Text OpenApi
forall a b. a -&gt; Either a b
</span><span class="hs-identifier hs-var">Left</span></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">FilePath -&gt; Text
</span><span class="hs-identifier hs-var">T.pack</span></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">ParseException -&gt; FilePath
</span><a href="file:///nix/store/5yy64md1ny6jpffrkgsq9gn90diwkshl-yaml-0.11.11.2-doc/share/doc/yaml-0.11.11.2/html/src/Data.Yaml.Internal.html#prettyPrintParseException"><span class="hs-identifier hs-var">prettyPrintParseException</span></a></span><span> </span><span class="annot"><span class="annottext">ParseException
</span><a href="#local-6989586621679199113"><span class="hs-identifier hs-var">err</span></a></span><span class="hs-special">)</span><span class="hs-special">)</span><span>
</span><span id="line-79"></span><span>        </span><span class="annot"><span class="hs-identifier hs-type">Right</span></span><span> </span><span id="local-6989586621679199115"><span class="annot"><span class="annottext">OpenApi
</span><a href="#local-6989586621679199115"><span class="hs-identifier hs-var">spec</span></a></span></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="annottext">OpenApi -&gt; Either Text OpenApi
forall a b. b -&gt; Either a b
</span><span class="hs-identifier hs-var">Right</span></span><span> </span><span class="annot"><span class="annottext">OpenApi
</span><a href="#local-6989586621679199115"><span class="hs-identifier hs-var">spec</span></a></span><span>
</span><span id="line-80"></span></pre></body></html>