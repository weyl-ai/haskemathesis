<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd"><html xmlns="http://www.w3.org/1999/xhtml"><head><meta http-equiv="Content-Type" content="text/html; charset=UTF-8" /><meta name="viewport" content="width=device-width, initial-scale=1" /><title>Haskemathesis.Stateful.Extract</title><link href="linuwial.css" rel="stylesheet" type="text/css" title="Linuwial" /><link rel="stylesheet" type="text/css" href="quick-jump.css" /><link rel="stylesheet" type="text/css" href="https://fonts.googleapis.com/css?family=PT+Sans:400,400i,700" /><script src="haddock-bundle.min.js" async="async" type="text/javascript"></script><script type="text/x-mathjax-config">MathJax.Hub.Config({ tex2jax: { processClass: "mathjax", ignoreClass: ".*" } });</script><script src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.5/MathJax.js?config=TeX-AMS-MML_HTMLorMML" type="text/javascript"></script></head><body><div id="package-header"><span class="caption">haskemathesis-0.1.0.0</span><ul class="links" id="page-menu"><li><a href="src/Haskemathesis.Stateful.Extract.html">Source</a></li><li><a href="index.html">Contents</a></li><li><a href="doc-index.html">Index</a></li></ul></div><div id="content"><div id="module-header"><table class="info"><tr><th>Safe Haskell</th><td>None</td></tr><tr><th>Language</th><td>Haskell2010</td></tr></table><p class="caption">Haskemathesis.Stateful.Extract</p></div><div id="table-of-contents"><div id="contents-list"><p class="caption" onclick="window.scrollTo(0,0)">Contents</p><ul><li><a href="#g:1">Core Extraction</a></li><li><a href="#g:2">Response Body Extraction</a></li><li><a href="#g:3">Header Extraction</a></li><li><a href="#g:4">Path Parsing</a></li><li><a href="#g:5">State Updates</a></li></ul></div></div><div id="description"><p class="caption">Description</p><div class="doc"><p>Value extraction from API responses.</p><p>This module provides functions for extracting values from API responses
based on <code><a href="Haskemathesis-Stateful-Types.html#t:ValueSource" title="Haskemathesis.Stateful.Types">ValueSource</a></code> specifications. Extracted values can be used to
fill parameters in subsequent requests during stateful testing.</p><h3>Supported Extraction Methods</h3><ul><li><strong>JSON Path</strong> - Extract from response body using path expressions</li><li><strong>Header</strong> - Extract from response headers (e.g., Location)</li><li><strong>Field Name</strong> - Simple field lookup in JSON objects</li></ul><h3>JSON Path Syntax</h3><p>We support a subset of OpenAPI runtime expressions:</p><ul><li><code>$response.body#/id</code> - JSON pointer into response body</li><li><code>$response.body#/data/0/id</code> - Nested path with array index</li><li><code>$.id</code> - Simplified JSONPath-style syntax</li></ul><h3>Example</h3><pre>import Haskemathesis.Stateful.Extract
import Haskemathesis.Stateful.Types

-- Extract &quot;id&quot; field from response body
let source = FromResponseBody &quot;$response.body#/id&quot;
    response = ApiResponse 201 [...] &quot;{&quot;id&quot;: 42, &quot;name&quot;: &quot;Alice&quot;}&quot; 0.1
in extractValue source response
-- Just (Number 42)

-- Extract from Location header
let source = FromResponseHeader <a href="Location.html">Location</a>
    response = ApiResponse 201 [(<a href="Location.html">Location</a>, &quot;<em>users</em>42&quot;)] &quot;&quot; 0.1
in extractValue source response
-- Just (String &quot;<em>users</em>42&quot;)
</pre></div></div><div id="synopsis"><details id="syn"><summary>Synopsis</summary><ul class="details-toggle" data-details-id="syn"><li class="src short"><a href="#v:extractValue">extractValue</a> :: <a href="Haskemathesis-Stateful-Types.html#t:ValueSource" title="Haskemathesis.Stateful.Types">ValueSource</a> -&gt; <a href="Haskemathesis-Stateful-Types.html#t:TestState" title="Haskemathesis.Stateful.Types">TestState</a> -&gt; <a href="Haskemathesis-Execute-Types.html#t:ApiResponse" title="Haskemathesis.Execute.Types">ApiResponse</a> -&gt; <a href="${pkgroot}/../../../../i6dn6airzp2fb6gj0vqpriavxp098129-ghc-9.10.3-doc/share/doc/ghc/html/libraries/base-4.20.2.0-7807/Data-Maybe.html#t:Maybe" title="Data.Maybe">Maybe</a> <a href="file:///nix/store/bjx03k98335ijsml9dq303bj5ddk8a5f-aeson-2.2.3.0-doc/share/doc/aeson-2.2.3.0/html/Data-Aeson-Types.html#t:Value" title="Data.Aeson.Types">Value</a></li><li class="src short"><a href="#v:extractFromState">extractFromState</a> :: <a href="${pkgroot}/../../../../i6dn6airzp2fb6gj0vqpriavxp098129-ghc-9.10.3-doc/share/doc/ghc/html/libraries/text-2.1.3-cd15/Data-Text.html#t:Text" title="Data.Text">Text</a> -&gt; <a href="Haskemathesis-Stateful-Types.html#t:TestState" title="Haskemathesis.Stateful.Types">TestState</a> -&gt; <a href="${pkgroot}/../../../../i6dn6airzp2fb6gj0vqpriavxp098129-ghc-9.10.3-doc/share/doc/ghc/html/libraries/base-4.20.2.0-7807/Data-Maybe.html#t:Maybe" title="Data.Maybe">Maybe</a> <a href="file:///nix/store/bjx03k98335ijsml9dq303bj5ddk8a5f-aeson-2.2.3.0-doc/share/doc/aeson-2.2.3.0/html/Data-Aeson-Types.html#t:Value" title="Data.Aeson.Types">Value</a></li><li class="src short"><a href="#v:extractByJsonPath">extractByJsonPath</a> :: <a href="${pkgroot}/../../../../i6dn6airzp2fb6gj0vqpriavxp098129-ghc-9.10.3-doc/share/doc/ghc/html/libraries/text-2.1.3-cd15/Data-Text.html#t:Text" title="Data.Text">Text</a> -&gt; <a href="${pkgroot}/../../../../i6dn6airzp2fb6gj0vqpriavxp098129-ghc-9.10.3-doc/share/doc/ghc/html/libraries/bytestring-0.12.2.0-2f6d/Data-ByteString.html#t:ByteString" title="Data.ByteString">ByteString</a> -&gt; <a href="${pkgroot}/../../../../i6dn6airzp2fb6gj0vqpriavxp098129-ghc-9.10.3-doc/share/doc/ghc/html/libraries/base-4.20.2.0-7807/Data-Maybe.html#t:Maybe" title="Data.Maybe">Maybe</a> <a href="file:///nix/store/bjx03k98335ijsml9dq303bj5ddk8a5f-aeson-2.2.3.0-doc/share/doc/aeson-2.2.3.0/html/Data-Aeson-Types.html#t:Value" title="Data.Aeson.Types">Value</a></li><li class="src short"><a href="#v:extractByFieldName">extractByFieldName</a> :: <a href="${pkgroot}/../../../../i6dn6airzp2fb6gj0vqpriavxp098129-ghc-9.10.3-doc/share/doc/ghc/html/libraries/text-2.1.3-cd15/Data-Text.html#t:Text" title="Data.Text">Text</a> -&gt; <a href="file:///nix/store/bjx03k98335ijsml9dq303bj5ddk8a5f-aeson-2.2.3.0-doc/share/doc/aeson-2.2.3.0/html/Data-Aeson-Types.html#t:Value" title="Data.Aeson.Types">Value</a> -&gt; <a href="${pkgroot}/../../../../i6dn6airzp2fb6gj0vqpriavxp098129-ghc-9.10.3-doc/share/doc/ghc/html/libraries/base-4.20.2.0-7807/Data-Maybe.html#t:Maybe" title="Data.Maybe">Maybe</a> <a href="file:///nix/store/bjx03k98335ijsml9dq303bj5ddk8a5f-aeson-2.2.3.0-doc/share/doc/aeson-2.2.3.0/html/Data-Aeson-Types.html#t:Value" title="Data.Aeson.Types">Value</a></li><li class="src short"><a href="#v:extractByPointer">extractByPointer</a> :: [<a href="${pkgroot}/../../../../i6dn6airzp2fb6gj0vqpriavxp098129-ghc-9.10.3-doc/share/doc/ghc/html/libraries/text-2.1.3-cd15/Data-Text.html#t:Text" title="Data.Text">Text</a>] -&gt; <a href="file:///nix/store/bjx03k98335ijsml9dq303bj5ddk8a5f-aeson-2.2.3.0-doc/share/doc/aeson-2.2.3.0/html/Data-Aeson-Types.html#t:Value" title="Data.Aeson.Types">Value</a> -&gt; <a href="${pkgroot}/../../../../i6dn6airzp2fb6gj0vqpriavxp098129-ghc-9.10.3-doc/share/doc/ghc/html/libraries/base-4.20.2.0-7807/Data-Maybe.html#t:Maybe" title="Data.Maybe">Maybe</a> <a href="file:///nix/store/bjx03k98335ijsml9dq303bj5ddk8a5f-aeson-2.2.3.0-doc/share/doc/aeson-2.2.3.0/html/Data-Aeson-Types.html#t:Value" title="Data.Aeson.Types">Value</a></li><li class="src short"><a href="#v:extractFromHeader">extractFromHeader</a> :: <a href="${pkgroot}/../../../../i6dn6airzp2fb6gj0vqpriavxp098129-ghc-9.10.3-doc/share/doc/ghc/html/libraries/text-2.1.3-cd15/Data-Text.html#t:Text" title="Data.Text">Text</a> -&gt; <a href="Haskemathesis-Execute-Types.html#t:ApiResponse" title="Haskemathesis.Execute.Types">ApiResponse</a> -&gt; <a href="${pkgroot}/../../../../i6dn6airzp2fb6gj0vqpriavxp098129-ghc-9.10.3-doc/share/doc/ghc/html/libraries/base-4.20.2.0-7807/Data-Maybe.html#t:Maybe" title="Data.Maybe">Maybe</a> <a href="file:///nix/store/bjx03k98335ijsml9dq303bj5ddk8a5f-aeson-2.2.3.0-doc/share/doc/aeson-2.2.3.0/html/Data-Aeson-Types.html#t:Value" title="Data.Aeson.Types">Value</a></li><li class="src short"><a href="#v:extractFromLocation">extractFromLocation</a> :: <a href="Haskemathesis-Execute-Types.html#t:ApiResponse" title="Haskemathesis.Execute.Types">ApiResponse</a> -&gt; <a href="${pkgroot}/../../../../i6dn6airzp2fb6gj0vqpriavxp098129-ghc-9.10.3-doc/share/doc/ghc/html/libraries/base-4.20.2.0-7807/Data-Maybe.html#t:Maybe" title="Data.Maybe">Maybe</a> <a href="${pkgroot}/../../../../i6dn6airzp2fb6gj0vqpriavxp098129-ghc-9.10.3-doc/share/doc/ghc/html/libraries/text-2.1.3-cd15/Data-Text.html#t:Text" title="Data.Text">Text</a></li><li class="src short"><a href="#v:parseJsonPointer">parseJsonPointer</a> :: <a href="${pkgroot}/../../../../i6dn6airzp2fb6gj0vqpriavxp098129-ghc-9.10.3-doc/share/doc/ghc/html/libraries/text-2.1.3-cd15/Data-Text.html#t:Text" title="Data.Text">Text</a> -&gt; <a href="${pkgroot}/../../../../i6dn6airzp2fb6gj0vqpriavxp098129-ghc-9.10.3-doc/share/doc/ghc/html/libraries/base-4.20.2.0-7807/Data-Maybe.html#t:Maybe" title="Data.Maybe">Maybe</a> [<a href="${pkgroot}/../../../../i6dn6airzp2fb6gj0vqpriavxp098129-ghc-9.10.3-doc/share/doc/ghc/html/libraries/text-2.1.3-cd15/Data-Text.html#t:Text" title="Data.Text">Text</a>]</li><li class="src short"><a href="#v:parseOpenApiExpression">parseOpenApiExpression</a> :: <a href="${pkgroot}/../../../../i6dn6airzp2fb6gj0vqpriavxp098129-ghc-9.10.3-doc/share/doc/ghc/html/libraries/text-2.1.3-cd15/Data-Text.html#t:Text" title="Data.Text">Text</a> -&gt; <a href="${pkgroot}/../../../../i6dn6airzp2fb6gj0vqpriavxp098129-ghc-9.10.3-doc/share/doc/ghc/html/libraries/base-4.20.2.0-7807/Data-Maybe.html#t:Maybe" title="Data.Maybe">Maybe</a> [<a href="${pkgroot}/../../../../i6dn6airzp2fb6gj0vqpriavxp098129-ghc-9.10.3-doc/share/doc/ghc/html/libraries/text-2.1.3-cd15/Data-Text.html#t:Text" title="Data.Text">Text</a>]</li><li class="src short"><a href="#v:updateStateFromResponse">updateStateFromResponse</a> :: <a href="${pkgroot}/../../../../i6dn6airzp2fb6gj0vqpriavxp098129-ghc-9.10.3-doc/share/doc/ghc/html/libraries/text-2.1.3-cd15/Data-Text.html#t:Text" title="Data.Text">Text</a> -&gt; <a href="Haskemathesis-Stateful-Types.html#t:TestState" title="Haskemathesis.Stateful.Types">TestState</a> -&gt; <a href="Haskemathesis-Execute-Types.html#t:ApiResponse" title="Haskemathesis.Execute.Types">ApiResponse</a> -&gt; <a href="Haskemathesis-Stateful-Types.html#t:TestState" title="Haskemathesis.Stateful.Types">TestState</a></li><li class="src short"><a href="#v:extractIdFields">extractIdFields</a> :: <a href="file:///nix/store/bjx03k98335ijsml9dq303bj5ddk8a5f-aeson-2.2.3.0-doc/share/doc/aeson-2.2.3.0/html/Data-Aeson-Types.html#t:Object" title="Data.Aeson.Types">Object</a> -&gt; <a href="${pkgroot}/../../../../i6dn6airzp2fb6gj0vqpriavxp098129-ghc-9.10.3-doc/share/doc/ghc/html/libraries/containers-0.7-f803/Data-Map-Strict.html#t:Map" title="Data.Map.Strict">Map</a> <a href="${pkgroot}/../../../../i6dn6airzp2fb6gj0vqpriavxp098129-ghc-9.10.3-doc/share/doc/ghc/html/libraries/text-2.1.3-cd15/Data-Text.html#t:Text" title="Data.Text">Text</a> <a href="file:///nix/store/bjx03k98335ijsml9dq303bj5ddk8a5f-aeson-2.2.3.0-doc/share/doc/aeson-2.2.3.0/html/Data-Aeson-Types.html#t:Value" title="Data.Aeson.Types">Value</a></li></ul></details></div><div id="interface"><a href="#g:1" id="g:1"><h1>Core Extraction</h1></a><div class="top"><p class="src"><a id="v:extractValue" class="def">extractValue</a> :: <a href="Haskemathesis-Stateful-Types.html#t:ValueSource" title="Haskemathesis.Stateful.Types">ValueSource</a> -&gt; <a href="Haskemathesis-Stateful-Types.html#t:TestState" title="Haskemathesis.Stateful.Types">TestState</a> -&gt; <a href="Haskemathesis-Execute-Types.html#t:ApiResponse" title="Haskemathesis.Execute.Types">ApiResponse</a> -&gt; <a href="${pkgroot}/../../../../i6dn6airzp2fb6gj0vqpriavxp098129-ghc-9.10.3-doc/share/doc/ghc/html/libraries/base-4.20.2.0-7807/Data-Maybe.html#t:Maybe" title="Data.Maybe">Maybe</a> <a href="file:///nix/store/bjx03k98335ijsml9dq303bj5ddk8a5f-aeson-2.2.3.0-doc/share/doc/aeson-2.2.3.0/html/Data-Aeson-Types.html#t:Value" title="Data.Aeson.Types">Value</a> <a href="src/Haskemathesis.Stateful.Extract.html#extractValue" class="link">Source</a> <a href="#v:extractValue" class="selflink">#</a></p><div class="doc"><p>Extract a value based on a <code><a href="Haskemathesis-Stateful-Types.html#t:ValueSource" title="Haskemathesis.Stateful.Types">ValueSource</a></code> specification.</p><p>This is the main entry point for value extraction. It dispatches to
the appropriate extraction method based on the <code><a href="Haskemathesis-Stateful-Types.html#t:ValueSource" title="Haskemathesis.Stateful.Types">ValueSource</a></code> variant.</p><h3>Parameters</h3><ul><li><code>source</code> - Where to extract the value from</li><li><code>state</code> - Current test state (for <code><a href="Haskemathesis-Stateful-Types.html#v:FromState" title="Haskemathesis.Stateful.Types">FromState</a></code> lookups)</li><li><code>response</code> - The API response to extract from</li></ul><h3>Return Value</h3><p>Returns <code><a href="${pkgroot}/../../../../i6dn6airzp2fb6gj0vqpriavxp098129-ghc-9.10.3-doc/share/doc/ghc/html/libraries/base-4.20.2.0-7807/Data-Maybe.html#v:Just" title="Data.Maybe">Just</a></code> the extracted value, or <code><a href="${pkgroot}/../../../../i6dn6airzp2fb6gj0vqpriavxp098129-ghc-9.10.3-doc/share/doc/ghc/html/libraries/base-4.20.2.0-7807/Data-Maybe.html#v:Nothing" title="Data.Maybe">Nothing</a></code> if extraction fails
(e.g., missing field, invalid path, parse error).</p><h3>Example</h3><pre>let source = FromResponseBody &quot;$response.body#/id&quot;
extractValue source state response
-- Just (Number 42)
</pre></div></div><div class="top"><p class="src"><a id="v:extractFromState" class="def">extractFromState</a> :: <a href="${pkgroot}/../../../../i6dn6airzp2fb6gj0vqpriavxp098129-ghc-9.10.3-doc/share/doc/ghc/html/libraries/text-2.1.3-cd15/Data-Text.html#t:Text" title="Data.Text">Text</a> -&gt; <a href="Haskemathesis-Stateful-Types.html#t:TestState" title="Haskemathesis.Stateful.Types">TestState</a> -&gt; <a href="${pkgroot}/../../../../i6dn6airzp2fb6gj0vqpriavxp098129-ghc-9.10.3-doc/share/doc/ghc/html/libraries/base-4.20.2.0-7807/Data-Maybe.html#t:Maybe" title="Data.Maybe">Maybe</a> <a href="file:///nix/store/bjx03k98335ijsml9dq303bj5ddk8a5f-aeson-2.2.3.0-doc/share/doc/aeson-2.2.3.0/html/Data-Aeson-Types.html#t:Value" title="Data.Aeson.Types">Value</a> <a href="src/Haskemathesis.Stateful.Extract.html#extractFromState" class="link">Source</a> <a href="#v:extractFromState" class="selflink">#</a></p><div class="doc"><p>Extract a named value from the test state.</p><p>Looks up a value by name in the <code><a href="Haskemathesis-Stateful-Types.html#v:tsExtractedValues" title="Haskemathesis.Stateful.Types">tsExtractedValues</a></code> map.</p><h3>Example</h3><pre>let state = emptyState { tsExtractedValues = Map.singleton &quot;userId&quot; (Number 42) }
extractFromState &quot;userId&quot; state
-- Just (Number 42)
</pre></div></div><a href="#g:2" id="g:2"><h1>Response Body Extraction</h1></a><div class="top"><p class="src"><a id="v:extractByJsonPath" class="def">extractByJsonPath</a> :: <a href="${pkgroot}/../../../../i6dn6airzp2fb6gj0vqpriavxp098129-ghc-9.10.3-doc/share/doc/ghc/html/libraries/text-2.1.3-cd15/Data-Text.html#t:Text" title="Data.Text">Text</a> -&gt; <a href="${pkgroot}/../../../../i6dn6airzp2fb6gj0vqpriavxp098129-ghc-9.10.3-doc/share/doc/ghc/html/libraries/bytestring-0.12.2.0-2f6d/Data-ByteString.html#t:ByteString" title="Data.ByteString">ByteString</a> -&gt; <a href="${pkgroot}/../../../../i6dn6airzp2fb6gj0vqpriavxp098129-ghc-9.10.3-doc/share/doc/ghc/html/libraries/base-4.20.2.0-7807/Data-Maybe.html#t:Maybe" title="Data.Maybe">Maybe</a> <a href="file:///nix/store/bjx03k98335ijsml9dq303bj5ddk8a5f-aeson-2.2.3.0-doc/share/doc/aeson-2.2.3.0/html/Data-Aeson-Types.html#t:Value" title="Data.Aeson.Types">Value</a> <a href="src/Haskemathesis.Stateful.Extract.html#extractByJsonPath" class="link">Source</a> <a href="#v:extractByJsonPath" class="selflink">#</a></p><div class="doc"><p>Extract a value from response body using a JSON path expression.</p><p>Supports two syntaxes:</p><ul><li>OpenAPI runtime expression: <code>$response.body#/field/path</code></li><li>Simplified JSONPath: <code>$.field.path</code> or just <code>field</code></li></ul><h3>Example</h3><pre>extractByJsonPath &quot;$response.body#/id&quot; &quot;{&quot;id&quot;: 42}&quot;
-- Just (Number 42)

extractByJsonPath &quot;$.data.name&quot; &quot;{&quot;data&quot;: {&quot;name&quot;: &quot;Alice&quot;}}&quot;
-- Just (String <a href="Alice.html">Alice</a>)

extractByJsonPath &quot;id&quot; &quot;{&quot;id&quot;: 42}&quot;
-- Just (Number 42)
</pre></div></div><div class="top"><p class="src"><a id="v:extractByFieldName" class="def">extractByFieldName</a> :: <a href="${pkgroot}/../../../../i6dn6airzp2fb6gj0vqpriavxp098129-ghc-9.10.3-doc/share/doc/ghc/html/libraries/text-2.1.3-cd15/Data-Text.html#t:Text" title="Data.Text">Text</a> -&gt; <a href="file:///nix/store/bjx03k98335ijsml9dq303bj5ddk8a5f-aeson-2.2.3.0-doc/share/doc/aeson-2.2.3.0/html/Data-Aeson-Types.html#t:Value" title="Data.Aeson.Types">Value</a> -&gt; <a href="${pkgroot}/../../../../i6dn6airzp2fb6gj0vqpriavxp098129-ghc-9.10.3-doc/share/doc/ghc/html/libraries/base-4.20.2.0-7807/Data-Maybe.html#t:Maybe" title="Data.Maybe">Maybe</a> <a href="file:///nix/store/bjx03k98335ijsml9dq303bj5ddk8a5f-aeson-2.2.3.0-doc/share/doc/aeson-2.2.3.0/html/Data-Aeson-Types.html#t:Value" title="Data.Aeson.Types">Value</a> <a href="src/Haskemathesis.Stateful.Extract.html#extractByFieldName" class="link">Source</a> <a href="#v:extractByFieldName" class="selflink">#</a></p><div class="doc"><p>Extract a value by simple field name lookup.</p><p>Only works on JSON objects. For nested paths, use <code><a href="Haskemathesis-Stateful-Extract.html#v:extractByJsonPath" title="Haskemathesis.Stateful.Extract">extractByJsonPath</a></code>.</p><h3>Example</h3><pre>let json = Object (KeyMap.singleton &quot;id&quot; (Number 42))
extractByFieldName &quot;id&quot; json
-- Just (Number 42)
</pre></div></div><div class="top"><p class="src"><a id="v:extractByPointer" class="def">extractByPointer</a> :: [<a href="${pkgroot}/../../../../i6dn6airzp2fb6gj0vqpriavxp098129-ghc-9.10.3-doc/share/doc/ghc/html/libraries/text-2.1.3-cd15/Data-Text.html#t:Text" title="Data.Text">Text</a>] -&gt; <a href="file:///nix/store/bjx03k98335ijsml9dq303bj5ddk8a5f-aeson-2.2.3.0-doc/share/doc/aeson-2.2.3.0/html/Data-Aeson-Types.html#t:Value" title="Data.Aeson.Types">Value</a> -&gt; <a href="${pkgroot}/../../../../i6dn6airzp2fb6gj0vqpriavxp098129-ghc-9.10.3-doc/share/doc/ghc/html/libraries/base-4.20.2.0-7807/Data-Maybe.html#t:Maybe" title="Data.Maybe">Maybe</a> <a href="file:///nix/store/bjx03k98335ijsml9dq303bj5ddk8a5f-aeson-2.2.3.0-doc/share/doc/aeson-2.2.3.0/html/Data-Aeson-Types.html#t:Value" title="Data.Aeson.Types">Value</a> <a href="src/Haskemathesis.Stateful.Extract.html#extractByPointer" class="link">Source</a> <a href="#v:extractByPointer" class="selflink">#</a></p><div class="doc"><p>Extract a value using a JSON pointer (list of path segments).</p><p>Traverses nested objects and arrays according to the pointer segments.</p><h3>Example</h3><pre>let json = Object (KeyMap.singleton &quot;user&quot; (Object (KeyMap.singleton &quot;id&quot; (Number 42))))
extractByPointer [&quot;user&quot;, &quot;id&quot;] json
-- Just (Number 42)

let arr = Array (V.fromList [Number 1, Number 2, Number 3])
extractByPointer [&quot;1&quot;] arr
-- Just (Number 2)
</pre></div></div><a href="#g:3" id="g:3"><h1>Header Extraction</h1></a><div class="top"><p class="src"><a id="v:extractFromHeader" class="def">extractFromHeader</a> :: <a href="${pkgroot}/../../../../i6dn6airzp2fb6gj0vqpriavxp098129-ghc-9.10.3-doc/share/doc/ghc/html/libraries/text-2.1.3-cd15/Data-Text.html#t:Text" title="Data.Text">Text</a> -&gt; <a href="Haskemathesis-Execute-Types.html#t:ApiResponse" title="Haskemathesis.Execute.Types">ApiResponse</a> -&gt; <a href="${pkgroot}/../../../../i6dn6airzp2fb6gj0vqpriavxp098129-ghc-9.10.3-doc/share/doc/ghc/html/libraries/base-4.20.2.0-7807/Data-Maybe.html#t:Maybe" title="Data.Maybe">Maybe</a> <a href="file:///nix/store/bjx03k98335ijsml9dq303bj5ddk8a5f-aeson-2.2.3.0-doc/share/doc/aeson-2.2.3.0/html/Data-Aeson-Types.html#t:Value" title="Data.Aeson.Types">Value</a> <a href="src/Haskemathesis.Stateful.Extract.html#extractFromHeader" class="link">Source</a> <a href="#v:extractFromHeader" class="selflink">#</a></p><div class="doc"><p>Extract a value from a response header.</p><p>Header names are matched case-insensitively.</p><h3>Example</h3><pre>let response = ApiResponse 201 [(&quot;X-Request-Id&quot;, &quot;abc123&quot;)] &quot;&quot; 0.1
extractFromHeader &quot;x-request-id&quot; response
-- Just (String &quot;abc123&quot;)
</pre></div></div><div class="top"><p class="src"><a id="v:extractFromLocation" class="def">extractFromLocation</a> :: <a href="Haskemathesis-Execute-Types.html#t:ApiResponse" title="Haskemathesis.Execute.Types">ApiResponse</a> -&gt; <a href="${pkgroot}/../../../../i6dn6airzp2fb6gj0vqpriavxp098129-ghc-9.10.3-doc/share/doc/ghc/html/libraries/base-4.20.2.0-7807/Data-Maybe.html#t:Maybe" title="Data.Maybe">Maybe</a> <a href="${pkgroot}/../../../../i6dn6airzp2fb6gj0vqpriavxp098129-ghc-9.10.3-doc/share/doc/ghc/html/libraries/text-2.1.3-cd15/Data-Text.html#t:Text" title="Data.Text">Text</a> <a href="src/Haskemathesis.Stateful.Extract.html#extractFromLocation" class="link">Source</a> <a href="#v:extractFromLocation" class="selflink">#</a></p><div class="doc"><p>Extract a resource URL from the Location header.</p><p>Common pattern for REST APIs: POST returns 201 with Location header
pointing to the created resource.</p><h3>Example</h3><pre>let response = ApiResponse 201 [(<a href="Location.html">Location</a>, &quot;<em>users</em>42&quot;)] &quot;&quot; 0.1
extractFromLocation response
-- Just &quot;<em>users</em>42&quot;
</pre></div></div><a href="#g:4" id="g:4"><h1>Path Parsing</h1></a><div class="top"><p class="src"><a id="v:parseJsonPointer" class="def">parseJsonPointer</a> :: <a href="${pkgroot}/../../../../i6dn6airzp2fb6gj0vqpriavxp098129-ghc-9.10.3-doc/share/doc/ghc/html/libraries/text-2.1.3-cd15/Data-Text.html#t:Text" title="Data.Text">Text</a> -&gt; <a href="${pkgroot}/../../../../i6dn6airzp2fb6gj0vqpriavxp098129-ghc-9.10.3-doc/share/doc/ghc/html/libraries/base-4.20.2.0-7807/Data-Maybe.html#t:Maybe" title="Data.Maybe">Maybe</a> [<a href="${pkgroot}/../../../../i6dn6airzp2fb6gj0vqpriavxp098129-ghc-9.10.3-doc/share/doc/ghc/html/libraries/text-2.1.3-cd15/Data-Text.html#t:Text" title="Data.Text">Text</a>] <a href="src/Haskemathesis.Stateful.Extract.html#parseJsonPointer" class="link">Source</a> <a href="#v:parseJsonPointer" class="selflink">#</a></p><div class="doc"><p>Parse a JSON Pointer (RFC 6901) into path segments.</p><p>JSON Pointers start with &quot;<em>&quot; and use &quot;</em>&quot; as separator.
Handles escape sequences: ~0 = ~, ~1 = /</p><h3>Example</h3><pre>parseJsonPointer &quot;<em>user</em>id&quot;
-- Just [&quot;user&quot;, &quot;id&quot;]

parseJsonPointer &quot;<em>data</em>0/name&quot;
-- Just [&quot;data&quot;, &quot;0&quot;, &quot;name&quot;]

parseJsonPointer &quot;/field~1with~1slashes&quot;
-- Just [&quot;field<em>with</em>slashes&quot;]
</pre></div></div><div class="top"><p class="src"><a id="v:parseOpenApiExpression" class="def">parseOpenApiExpression</a> :: <a href="${pkgroot}/../../../../i6dn6airzp2fb6gj0vqpriavxp098129-ghc-9.10.3-doc/share/doc/ghc/html/libraries/text-2.1.3-cd15/Data-Text.html#t:Text" title="Data.Text">Text</a> -&gt; <a href="${pkgroot}/../../../../i6dn6airzp2fb6gj0vqpriavxp098129-ghc-9.10.3-doc/share/doc/ghc/html/libraries/base-4.20.2.0-7807/Data-Maybe.html#t:Maybe" title="Data.Maybe">Maybe</a> [<a href="${pkgroot}/../../../../i6dn6airzp2fb6gj0vqpriavxp098129-ghc-9.10.3-doc/share/doc/ghc/html/libraries/text-2.1.3-cd15/Data-Text.html#t:Text" title="Data.Text">Text</a>] <a href="src/Haskemathesis.Stateful.Extract.html#parseOpenApiExpression" class="link">Source</a> <a href="#v:parseOpenApiExpression" class="selflink">#</a></p><div class="doc"><p>Parse an OpenAPI runtime expression or JSON path into pointer segments.</p><p>Supports:</p><ul><li><code>$response.body#/field/nested</code> - OpenAPI runtime expression</li><li><code>$.field.nested</code> - JSONPath-style</li><li><code>field</code> - Simple field name</li></ul><h3>Example</h3><pre>parseOpenApiExpression &quot;$response.body#<em>user</em>id&quot;
-- Just [&quot;user&quot;, &quot;id&quot;]

parseOpenApiExpression &quot;$.data.items&quot;
-- Just [&quot;data&quot;, &quot;items&quot;]

parseOpenApiExpression &quot;id&quot;
-- Just [&quot;id&quot;]
</pre></div></div><a href="#g:5" id="g:5"><h1>State Updates</h1></a><div class="top"><p class="src"><a id="v:updateStateFromResponse" class="def">updateStateFromResponse</a> :: <a href="${pkgroot}/../../../../i6dn6airzp2fb6gj0vqpriavxp098129-ghc-9.10.3-doc/share/doc/ghc/html/libraries/text-2.1.3-cd15/Data-Text.html#t:Text" title="Data.Text">Text</a> -&gt; <a href="Haskemathesis-Stateful-Types.html#t:TestState" title="Haskemathesis.Stateful.Types">TestState</a> -&gt; <a href="Haskemathesis-Execute-Types.html#t:ApiResponse" title="Haskemathesis.Execute.Types">ApiResponse</a> -&gt; <a href="Haskemathesis-Stateful-Types.html#t:TestState" title="Haskemathesis.Stateful.Types">TestState</a> <a href="src/Haskemathesis.Stateful.Extract.html#updateStateFromResponse" class="link">Source</a> <a href="#v:updateStateFromResponse" class="selflink">#</a></p><div class="doc"><p>Update test state with values extracted from a response.</p><p>This function extracts common ID fields from the response and adds them
to the state's extracted values map.</p><h3>Auto-extracted Fields</h3><ul><li><code>id</code> - Common primary key field</li><li><code>_id</code> - MongoDB-style ID</li><li>Any field ending in <code>Id</code> or <code>_id</code></li></ul><h3>Example</h3><pre>let response = ApiResponse 201 [] &quot;{&quot;id&quot;: 42, &quot;userId&quot;: 7}&quot; 0.1
    state = emptyState
    newState = updateStateFromResponse &quot;createUser&quot; state response
-- newState.tsExtractedValues contains &quot;id&quot; -&gt; 42, &quot;userId&quot; -&gt; 7
</pre></div></div><div class="top"><p class="src"><a id="v:extractIdFields" class="def">extractIdFields</a> :: <a href="file:///nix/store/bjx03k98335ijsml9dq303bj5ddk8a5f-aeson-2.2.3.0-doc/share/doc/aeson-2.2.3.0/html/Data-Aeson-Types.html#t:Object" title="Data.Aeson.Types">Object</a> -&gt; <a href="${pkgroot}/../../../../i6dn6airzp2fb6gj0vqpriavxp098129-ghc-9.10.3-doc/share/doc/ghc/html/libraries/containers-0.7-f803/Data-Map-Strict.html#t:Map" title="Data.Map.Strict">Map</a> <a href="${pkgroot}/../../../../i6dn6airzp2fb6gj0vqpriavxp098129-ghc-9.10.3-doc/share/doc/ghc/html/libraries/text-2.1.3-cd15/Data-Text.html#t:Text" title="Data.Text">Text</a> <a href="file:///nix/store/bjx03k98335ijsml9dq303bj5ddk8a5f-aeson-2.2.3.0-doc/share/doc/aeson-2.2.3.0/html/Data-Aeson-Types.html#t:Value" title="Data.Aeson.Types">Value</a> <a href="src/Haskemathesis.Stateful.Extract.html#extractIdFields" class="link">Source</a> <a href="#v:extractIdFields" class="selflink">#</a></p><div class="doc"><p>Extract fields that look like identifiers from a JSON object.</p><p>Identifies fields by name pattern:
* Exactly &quot;id&quot; or &quot;_id&quot;
* Ends with <a href="Id.html">Id</a> or &quot;_id&quot; (e.g., &quot;userId&quot;, &quot;user_id&quot;)</p></div></div></div></div><div id="footer"><p>Produced by <a href="http://www.haskell.org/haddock/">Haddock</a> version 2.31.1</p></div></body></html>